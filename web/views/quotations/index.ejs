<%- include('../partials/header', { pageTitle: 'Quotation List', activePage: 'list' }) %>

    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">
            <span>üìã</span>
            Quotation List
        </h1>
        <a href="/quotations/new" class="btn btn-success btn-lg">
            ‚ûï Create New Quotation
        </a>
    </div>

    <!-- Quotations Card -->
    <div class="card">
        <% if (quotations.length === 0) { %>
            <div class="empty-state">
                <div class="empty-state-icon">üìÑ</div>
                <h3>No Quotations Found</h3>
                <p>Get started by creating your first quotation.</p>
                <a href="/quotations/new" class="btn btn-primary btn-lg">
                    ‚ûï Create New Quotation
                </a>
            </div>
        <% } else { %>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Document No.</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th class="text-right">Total Amount</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% quotations.forEach(q => { %>
                            <tr>
                                <td><strong><%= q.document_no %></strong></td>
                                <td><%= q.date %></td>
                                <td><%= q.customer_name %></td>
                                <td class="text-right"><strong><%= q.total_amount.toFixed(2) %> ‡∏ø</strong></td>
                                <td>
                                    <div class="actions">
                                        <a href="/quotations/<%= q.id %>" class="btn btn-primary btn-sm">üëÅÔ∏è View</a>
                                        <a href="/quotations/<%= q.id %>/pdf" class="btn btn-success btn-sm">üì• PDF</a>
                                        <button class="btn btn-danger btn-sm" onclick="deleteQuotation(<%= q.id %>)">üóëÔ∏è Delete</button>
                                    </div>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        <% } %>
    </div>

    <script>
        async function deleteQuotation(id) {
            if (confirm('Are you sure you want to delete this quotation?')) {
                const response = await fetch(`/quotations/${id}`, { method: 'DELETE' });
                if (response.ok) {
                    location.reload();
                } else {
                    alert('Failed to delete quotation');
                }
            }
        }
    </script>

<%- include('../partials/footer') %>
